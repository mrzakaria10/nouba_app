2025-05-23T00:28:15.399+02:00  INFO 15660 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 15660 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T00:28:15.415+02:00  INFO 15660 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T00:28:18.955+02:00  INFO 15660 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T00:28:19.271+02:00  INFO 15660 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 261 ms. Found 6 JPA repository interfaces.
2025-05-23T00:28:21.681+02:00  INFO 15660 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T00:28:21.731+02:00  INFO 15660 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T00:28:21.739+02:00  INFO 15660 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T00:28:21.973+02:00  INFO 15660 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T00:28:21.973+02:00  INFO 15660 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6371 ms
2025-05-23T00:28:22.523+02:00  INFO 15660 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T00:28:22.793+02:00  INFO 15660 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T00:28:23.002+02:00  INFO 15660 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T00:28:23.921+02:00  INFO 15660 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T00:28:24.028+02:00  INFO 15660 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T00:28:24.423+02:00  INFO 15660 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5350ab17
2025-05-23T00:28:24.431+02:00  INFO 15660 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T00:28:24.506+02:00  WARN 15660 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T00:28:24.506+02:00  WARN 15660 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T00:28:24.564+02:00  INFO 15660 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T00:28:27.067+02:00  INFO 15660 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T00:28:27.453+02:00  INFO 15660 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T00:28:28.358+02:00  INFO 15660 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T00:28:33.001+02:00  WARN 15660 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T00:28:33.079+02:00  INFO 15660 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T00:28:35.006+02:00  INFO 15660 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T00:28:35.038+02:00  INFO 15660 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 21.337 seconds (process running for 22.804)
2025-05-23T00:28:46.067+02:00  INFO 15660 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T00:28:46.094+02:00  INFO 15660 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T00:28:46.102+02:00  INFO 15660 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T00:28:46.111+02:00  INFO 15660 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T00:28:46.126+02:00  INFO 15660 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T07:34:43.127+02:00  INFO 4184 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 4184 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T07:34:43.135+02:00  INFO 4184 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T07:34:46.413+02:00  INFO 4184 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T07:34:46.738+02:00  INFO 4184 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 290 ms. Found 6 JPA repository interfaces.
2025-05-23T07:34:49.001+02:00  INFO 4184 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T07:34:49.051+02:00  INFO 4184 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T07:34:49.051+02:00  INFO 4184 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T07:34:49.291+02:00  INFO 4184 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T07:34:49.301+02:00  INFO 4184 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6011 ms
2025-05-23T07:34:49.810+02:00  INFO 4184 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T07:34:50.030+02:00  INFO 4184 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T07:34:50.155+02:00  INFO 4184 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T07:34:51.119+02:00  INFO 4184 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T07:34:51.219+02:00  INFO 4184 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T07:34:51.668+02:00  INFO 4184 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@60652518
2025-05-23T07:34:51.676+02:00  INFO 4184 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T07:34:51.725+02:00  WARN 4184 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T07:34:51.733+02:00  WARN 4184 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T07:34:51.774+02:00  INFO 4184 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T07:34:54.598+02:00  INFO 4184 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T07:34:54.966+02:00  INFO 4184 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T07:34:56.171+02:00  INFO 4184 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T07:35:00.839+02:00  WARN 4184 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T07:35:00.916+02:00  INFO 4184 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T07:35:02.641+02:00  INFO 4184 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T07:35:02.660+02:00  INFO 4184 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 21.838 seconds (process running for 23.308)
2025-05-23T07:50:24.932+02:00  INFO 4184 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T07:50:24.966+02:00  INFO 4184 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T07:50:24.991+02:00  INFO 4184 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T07:50:25.011+02:00  INFO 4184 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T07:50:25.033+02:00  INFO 4184 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T07:50:38.202+02:00  INFO 14684 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 14684 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T07:50:38.208+02:00  INFO 14684 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T07:50:41.181+02:00  INFO 14684 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T07:50:41.498+02:00  INFO 14684 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 260 ms. Found 6 JPA repository interfaces.
2025-05-23T07:50:43.774+02:00  INFO 14684 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T07:50:43.827+02:00  INFO 14684 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T07:50:43.828+02:00  INFO 14684 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T07:50:44.068+02:00  INFO 14684 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T07:50:44.070+02:00  INFO 14684 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5715 ms
2025-05-23T07:50:44.675+02:00  INFO 14684 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T07:50:44.967+02:00  INFO 14684 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T07:50:45.074+02:00  INFO 14684 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T07:50:46.083+02:00  INFO 14684 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T07:50:46.209+02:00  INFO 14684 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T07:50:46.595+02:00  INFO 14684 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@438aaa9f
2025-05-23T07:50:46.601+02:00  INFO 14684 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T07:50:46.675+02:00  WARN 14684 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T07:50:46.678+02:00  WARN 14684 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T07:50:46.737+02:00  INFO 14684 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T07:50:49.237+02:00  INFO 14684 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T07:50:49.635+02:00  INFO 14684 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T07:50:50.556+02:00  INFO 14684 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T07:50:56.850+02:00  WARN 14684 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T07:50:57.004+02:00  INFO 14684 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T07:51:00.479+02:00  INFO 14684 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T07:51:00.573+02:00  INFO 14684 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 23.922 seconds (process running for 25.324)
2025-05-23T07:54:51.509+02:00  INFO 14684 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T07:54:51.510+02:00  INFO 14684 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T07:54:51.515+02:00  INFO 14684 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T07:54:52.401+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T07:54:52.470+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T07:55:15.674+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T07:55:15.677+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T07:55:15.810+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T07:56:39.650+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T07:56:39.653+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T07:58:37.812+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T07:58:50.139+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T07:59:22.665+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:00:04.055+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:00:04.059+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:00:12.510+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:00:12.513+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:00:12.622+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:02:42.366+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:02:42.373+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:03:05.116+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:03:05.119+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:03:17.726+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:03:17.729+02:00 DEBUG 14684 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:07:16.322+02:00  INFO 14684 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T08:07:16.334+02:00  INFO 14684 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T08:07:16.345+02:00  INFO 14684 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T08:07:16.355+02:00  INFO 14684 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T08:07:16.404+02:00  INFO 14684 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T08:07:29.928+02:00  INFO 12588 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 12588 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T08:07:29.940+02:00  INFO 12588 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T08:07:32.945+02:00  INFO 12588 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T08:07:33.282+02:00  INFO 12588 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 298 ms. Found 6 JPA repository interfaces.
2025-05-23T08:07:35.538+02:00  INFO 12588 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T08:07:35.589+02:00  INFO 12588 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T08:07:35.589+02:00  INFO 12588 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T08:07:35.783+02:00  INFO 12588 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T08:07:35.786+02:00  INFO 12588 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5705 ms
2025-05-23T08:07:36.331+02:00  INFO 12588 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T08:07:36.594+02:00  INFO 12588 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T08:07:36.753+02:00  INFO 12588 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T08:07:37.805+02:00  INFO 12588 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T08:07:37.926+02:00  INFO 12588 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T08:07:38.358+02:00  INFO 12588 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@481ed95c
2025-05-23T08:07:38.363+02:00  INFO 12588 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T08:07:38.443+02:00  WARN 12588 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T08:07:38.449+02:00  WARN 12588 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T08:07:38.513+02:00  INFO 12588 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T08:07:40.846+02:00  INFO 12588 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T08:07:41.155+02:00  INFO 12588 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T08:07:41.914+02:00  INFO 12588 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T08:07:46.335+02:00  WARN 12588 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T08:07:46.411+02:00  INFO 12588 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T08:07:47.985+02:00  INFO 12588 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T08:07:48.006+02:00  INFO 12588 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 19.969 seconds (process running for 21.297)
2025-05-23T08:07:59.309+02:00  INFO 12588 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T08:07:59.310+02:00  INFO 12588 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T08:07:59.317+02:00  INFO 12588 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2025-05-23T08:07:59.888+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:07:59.939+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:08:05.266+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:08:05.269+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:08:21.243+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:08:21.246+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:09:24.206+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:09:24.214+02:00 DEBUG 12588 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:20:36.325+02:00  INFO 12588 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T08:20:36.338+02:00  INFO 12588 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T08:20:36.348+02:00  INFO 12588 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T08:20:36.355+02:00  INFO 12588 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T08:20:36.365+02:00  INFO 12588 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T08:20:52.957+02:00  INFO 15656 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 15656 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T08:20:52.969+02:00  INFO 15656 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T08:20:55.890+02:00  INFO 15656 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T08:20:56.159+02:00  INFO 15656 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 236 ms. Found 6 JPA repository interfaces.
2025-05-23T08:20:59.189+02:00  INFO 15656 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T08:20:59.234+02:00  INFO 15656 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T08:20:59.235+02:00  INFO 15656 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T08:20:59.485+02:00  INFO 15656 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T08:20:59.487+02:00  INFO 15656 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6369 ms
2025-05-23T08:21:00.090+02:00  INFO 15656 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T08:21:00.325+02:00  INFO 15656 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T08:21:00.528+02:00  INFO 15656 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T08:21:01.560+02:00  INFO 15656 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T08:21:01.682+02:00  INFO 15656 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T08:21:02.102+02:00  INFO 15656 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ad6f98e
2025-05-23T08:21:02.107+02:00  INFO 15656 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T08:21:02.190+02:00  WARN 15656 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T08:21:02.194+02:00  WARN 15656 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T08:21:02.260+02:00  INFO 15656 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T08:21:04.874+02:00  INFO 15656 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T08:21:05.156+02:00  INFO 15656 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T08:21:05.879+02:00  INFO 15656 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T08:21:10.068+02:00  WARN 15656 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T08:21:10.138+02:00  INFO 15656 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T08:21:11.732+02:00  INFO 15656 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T08:21:11.754+02:00  INFO 15656 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 20.433 seconds (process running for 21.998)
2025-05-23T08:21:39.916+02:00  INFO 15656 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T08:21:39.918+02:00  INFO 15656 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T08:21:39.922+02:00  INFO 15656 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-05-23T08:21:40.419+02:00 DEBUG 15656 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:21:40.466+02:00 DEBUG 15656 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:21:52.371+02:00 DEBUG 15656 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:21:52.374+02:00 DEBUG 15656 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:22:05.014+02:00 DEBUG 15656 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:22:05.019+02:00 DEBUG 15656 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:25:10.971+02:00  INFO 15656 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T08:25:10.984+02:00  INFO 15656 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T08:25:11.004+02:00  INFO 15656 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T08:25:11.016+02:00  INFO 15656 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T08:25:11.031+02:00  INFO 15656 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T08:25:20.274+02:00  INFO 13004 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 13004 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T08:25:20.282+02:00  INFO 13004 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T08:25:23.035+02:00  INFO 13004 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T08:25:23.322+02:00  INFO 13004 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 234 ms. Found 6 JPA repository interfaces.
2025-05-23T08:25:25.297+02:00  INFO 13004 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T08:25:25.336+02:00  INFO 13004 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T08:25:25.338+02:00  INFO 13004 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T08:25:25.525+02:00  INFO 13004 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T08:25:25.528+02:00  INFO 13004 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5110 ms
2025-05-23T08:25:26.053+02:00  INFO 13004 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T08:25:26.237+02:00  INFO 13004 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T08:25:26.374+02:00  INFO 13004 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T08:25:27.333+02:00  INFO 13004 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T08:25:27.418+02:00  INFO 13004 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T08:25:27.754+02:00  INFO 13004 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@438aaa9f
2025-05-23T08:25:27.757+02:00  INFO 13004 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T08:25:27.792+02:00  WARN 13004 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T08:25:27.794+02:00  WARN 13004 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T08:25:27.834+02:00  INFO 13004 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T08:25:29.976+02:00  INFO 13004 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T08:25:30.240+02:00  INFO 13004 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T08:25:30.819+02:00  INFO 13004 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T08:25:34.982+02:00  WARN 13004 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T08:25:35.063+02:00  INFO 13004 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T08:25:36.791+02:00  INFO 13004 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T08:25:36.814+02:00  INFO 13004 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 17.953 seconds (process running for 19.123)
2025-05-23T08:25:52.084+02:00  INFO 13004 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T08:25:52.086+02:00  INFO 13004 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T08:25:52.090+02:00  INFO 13004 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T08:25:52.888+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:25:52.984+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:25:53.335+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T08:25:53.379+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T08:25:53.386+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:25:53.440+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T08:25:53.463+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,6) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T08:25:53.503+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T08:25:53.566+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T08:25:53.573+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T08:25:53.575+02:00 ERROR 13004 --- [app] [http-nio-8080-exec-2] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:264) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:71) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T08:27:30.599+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:27:30.603+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:27:30.613+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T08:27:30.619+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T08:27:30.624+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:27:30.631+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T08:27:30.638+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,6) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T08:27:30.643+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T08:27:30.651+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T08:27:30.659+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T08:27:30.661+02:00 ERROR 13004 --- [app] [http-nio-8080-exec-5] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:264) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:71) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T08:27:51.993+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:27:51.995+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:27:52.006+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T08:27:52.010+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T08:27:52.012+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:27:52.020+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T08:28:32.354+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:28:32.357+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:28:32.365+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T08:28:32.373+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T08:28:32.376+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:28:32.384+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T08:28:32.389+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,6) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T08:28:32.394+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T08:28:32.494+02:00  WARN 13004 --- [app] [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T08:28:32.494+02:00 ERROR 13004 --- [app] [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T08:32:52.029+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T08:32:52.035+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:32:52.056+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T08:32:52.063+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T08:32:52.067+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T08:32:52.078+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T08:32:52.097+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,6) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T08:32:52.104+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T08:32:52.112+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T08:32:52.117+02:00 DEBUG 13004 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T08:32:52.120+02:00 ERROR 13004 --- [app] [http-nio-8080-exec-6] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:264) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:71) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T08:39:28.570+02:00  INFO 13004 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T08:39:28.593+02:00  INFO 13004 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T08:39:28.620+02:00  INFO 13004 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T08:39:28.650+02:00  INFO 13004 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T08:39:28.672+02:00  INFO 13004 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T10:07:35.359+02:00  INFO 12244 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 12244 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T10:07:35.376+02:00  INFO 12244 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T10:07:38.028+02:00  INFO 12244 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T10:07:38.326+02:00  INFO 12244 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 270 ms. Found 6 JPA repository interfaces.
2025-05-23T10:07:40.525+02:00  INFO 12244 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T10:07:40.565+02:00  INFO 12244 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T10:07:40.566+02:00  INFO 12244 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T10:07:40.716+02:00  INFO 12244 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T10:07:40.717+02:00  INFO 12244 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5201 ms
2025-05-23T10:07:41.198+02:00  INFO 12244 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T10:07:41.392+02:00  INFO 12244 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T10:07:41.551+02:00  INFO 12244 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T10:07:42.353+02:00  INFO 12244 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T10:07:42.441+02:00  INFO 12244 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T10:07:42.848+02:00  INFO 12244 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@60652518
2025-05-23T10:07:42.851+02:00  INFO 12244 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T10:07:42.905+02:00  WARN 12244 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T10:07:42.907+02:00  WARN 12244 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T10:07:42.945+02:00  INFO 12244 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T10:07:45.060+02:00  INFO 12244 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T10:07:45.369+02:00  INFO 12244 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T10:07:46.210+02:00  INFO 12244 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T10:07:49.775+02:00  WARN 12244 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T10:07:49.842+02:00  INFO 12244 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T10:07:51.234+02:00  INFO 12244 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T10:07:51.253+02:00  INFO 12244 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 17.335 seconds (process running for 18.727)
2025-05-23T10:12:38.085+02:00  INFO 12244 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T10:12:38.086+02:00  INFO 12244 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T10:12:38.121+02:00  INFO 12244 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 34 ms
2025-05-23T10:12:38.832+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:12:38.932+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:12:39.227+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:12:39.238+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:12:39.248+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:12:39.294+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:12:39.315+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,6) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:12:39.359+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:12:39.476+02:00  WARN 12244 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T10:12:39.477+02:00 ERROR 12244 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA002' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T10:14:45.824+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:14:45.828+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:14:54.162+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:14:54.164+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:14:54.276+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:15:47.373+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:15:47.378+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:15:47.391+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:15:47.400+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:15:47.406+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:15:47.419+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:15:47.429+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,6) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:15:47.432+02:00 DEBUG 12244 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:15:47.436+02:00  WARN 12244 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T10:15:47.436+02:00 ERROR 12244 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA002' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T10:21:14.374+02:00  INFO 12244 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T10:21:14.387+02:00  INFO 12244 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T10:21:14.398+02:00  INFO 12244 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T10:21:14.407+02:00  INFO 12244 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T10:21:14.420+02:00  INFO 12244 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T10:21:24.937+02:00  INFO 15800 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 15800 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T10:21:24.942+02:00  INFO 15800 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T10:21:27.521+02:00  INFO 15800 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T10:21:27.763+02:00  INFO 15800 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 211 ms. Found 6 JPA repository interfaces.
2025-05-23T10:21:29.703+02:00  INFO 15800 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T10:21:29.741+02:00  INFO 15800 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T10:21:29.742+02:00  INFO 15800 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T10:21:29.901+02:00  INFO 15800 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T10:21:29.902+02:00  INFO 15800 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4782 ms
2025-05-23T10:21:30.308+02:00  INFO 15800 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T10:21:30.510+02:00  INFO 15800 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T10:21:30.635+02:00  INFO 15800 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T10:21:31.426+02:00  INFO 15800 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T10:21:31.507+02:00  INFO 15800 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T10:21:31.828+02:00  INFO 15800 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@60652518
2025-05-23T10:21:31.831+02:00  INFO 15800 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T10:21:31.905+02:00  WARN 15800 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T10:21:31.909+02:00  WARN 15800 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T10:21:31.958+02:00  INFO 15800 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T10:21:33.941+02:00  INFO 15800 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T10:21:34.208+02:00  INFO 15800 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T10:21:34.894+02:00  INFO 15800 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T10:21:38.473+02:00  WARN 15800 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T10:21:38.533+02:00  INFO 15800 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T10:21:40.004+02:00  INFO 15800 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T10:21:40.026+02:00  INFO 15800 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 16.41 seconds (process running for 17.572)
2025-05-23T10:22:08.742+02:00  INFO 15800 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T10:22:08.743+02:00  INFO 15800 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T10:22:08.748+02:00  INFO 15800 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-05-23T10:22:09.518+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:22:09.571+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:22:09.821+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:22:09.833+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:22:09.839+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:22:09.891+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:22:09.912+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,6) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:22:09.939+02:00 DEBUG 15800 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:22:09.994+02:00  WARN 15800 --- [app] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T10:22:09.995+02:00 ERROR 15800 --- [app] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA002' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T10:35:51.014+02:00  WARN 15800 --- [app] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=46s188ms309µs700ns).
2025-05-23T10:49:32.443+02:00  INFO 15800 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T10:49:32.497+02:00  INFO 15800 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T10:49:32.558+02:00  INFO 15800 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T10:49:32.686+02:00  INFO 15800 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T10:49:32.722+02:00  INFO 15800 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T10:49:43.924+02:00  INFO 2164 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 2164 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T10:49:43.934+02:00  INFO 2164 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T10:49:46.422+02:00  INFO 2164 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T10:49:46.643+02:00  INFO 2164 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 188 ms. Found 6 JPA repository interfaces.
2025-05-23T10:49:48.654+02:00  INFO 2164 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T10:49:48.696+02:00  INFO 2164 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T10:49:48.697+02:00  INFO 2164 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T10:49:48.872+02:00  INFO 2164 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T10:49:48.874+02:00  INFO 2164 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4794 ms
2025-05-23T10:49:49.338+02:00  INFO 2164 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T10:49:49.541+02:00  INFO 2164 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T10:49:49.660+02:00  INFO 2164 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T10:49:50.539+02:00  INFO 2164 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T10:49:50.650+02:00  INFO 2164 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T10:49:51.019+02:00  INFO 2164 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ed65e4b
2025-05-23T10:49:51.023+02:00  INFO 2164 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T10:49:51.084+02:00  WARN 2164 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T10:49:51.087+02:00  WARN 2164 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T10:49:51.132+02:00  INFO 2164 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T10:49:53.273+02:00  INFO 2164 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T10:49:53.487+02:00 DEBUG 2164 --- [app] [main] org.hibernate.SQL                        : alter table ticket drop index UKahewwgrd84lnyxh99panb2lji
2025-05-23T10:49:53.534+02:00 DEBUG 2164 --- [app] [main] org.hibernate.SQL                        : alter table ticket add constraint UKahewwgrd84lnyxh99panb2lji unique (agency_id, number)
2025-05-23T10:49:53.655+02:00  INFO 2164 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T10:49:54.260+02:00  INFO 2164 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T10:49:58.596+02:00  WARN 2164 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T10:49:58.672+02:00  INFO 2164 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T10:50:00.560+02:00  INFO 2164 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T10:50:00.614+02:00  INFO 2164 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 17.981 seconds (process running for 19.04)
2025-05-23T10:52:04.542+02:00  INFO 2164 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T10:52:04.542+02:00  INFO 2164 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T10:52:04.546+02:00  INFO 2164 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T10:52:04.927+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:52:04.978+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:52:05.195+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:52:05.215+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:52:05.224+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:52:05.274+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:52:05.301+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,9) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:52:05.340+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:52:05.385+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T10:52:05.393+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T10:52:05.395+02:00 ERROR 2164 --- [app] [http-nio-8080-exec-1] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:265) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T10:54:00.601+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:54:00.604+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:54:00.734+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:54:48.045+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:54:48.050+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:54:48.057+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:54:48.061+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:54:48.065+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:54:48.073+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:54:48.078+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,9) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:54:48.083+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:54:48.091+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T10:54:48.096+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T10:54:48.099+02:00 ERROR 2164 --- [app] [http-nio-8080-exec-6] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:265) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T10:55:30.753+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:55:30.756+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:55:30.763+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:55:30.768+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:55:30.771+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:55:30.776+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:55:30.779+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,9) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:55:30.781+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:55:30.787+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T10:55:30.790+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T10:55:30.793+02:00 ERROR 2164 --- [app] [http-nio-8080-exec-7] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:265) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T10:55:40.123+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:55:40.144+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:55:40.167+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:55:40.221+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:55:40.231+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:55:40.252+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:55:40.266+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,9) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:55:40.288+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:55:40.316+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T10:55:40.371+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T10:55:40.417+02:00 ERROR 2164 --- [app] [http-nio-8080-exec-8] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:265) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T10:55:44.058+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T10:55:44.064+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:55:44.074+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T10:55:44.093+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T10:55:44.096+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T10:55:44.102+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T10:55:44.108+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select max(cast(substring(t1_0.number,9) as signed)) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T10:55:44.111+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T10:55:44.117+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T10:55:44.123+02:00 DEBUG 2164 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T10:55:44.127+02:00 ERROR 2164 --- [app] [http-nio-8080-exec-9] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:265) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:72) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:03:31.007+02:00  INFO 2164 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T11:03:31.021+02:00  INFO 2164 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T11:03:31.029+02:00  INFO 2164 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:03:31.035+02:00  INFO 2164 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T11:03:31.045+02:00  INFO 2164 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T11:03:43.825+02:00  INFO 16640 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 16640 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T11:03:43.830+02:00  INFO 16640 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T11:03:46.200+02:00  INFO 16640 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T11:03:46.447+02:00  INFO 16640 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 218 ms. Found 6 JPA repository interfaces.
2025-05-23T11:03:48.207+02:00  INFO 16640 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T11:03:48.248+02:00  INFO 16640 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T11:03:48.248+02:00  INFO 16640 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T11:03:48.418+02:00  INFO 16640 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T11:03:48.420+02:00  INFO 16640 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4447 ms
2025-05-23T11:03:48.873+02:00  INFO 16640 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T11:03:49.113+02:00  INFO 16640 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T11:03:49.230+02:00  INFO 16640 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T11:03:49.997+02:00  INFO 16640 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T11:03:50.068+02:00  INFO 16640 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T11:03:50.368+02:00  INFO 16640 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3f06ebe0
2025-05-23T11:03:50.372+02:00  INFO 16640 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T11:03:50.432+02:00  WARN 16640 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T11:03:50.434+02:00  WARN 16640 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T11:03:50.478+02:00  INFO 16640 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T11:03:52.517+02:00  INFO 16640 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T11:03:52.684+02:00 DEBUG 16640 --- [app] [main] org.hibernate.SQL                        : alter table ticket add column sequence_number integer not null
2025-05-23T11:03:52.777+02:00  INFO 16640 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:03:53.473+02:00  INFO 16640 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T11:03:57.077+02:00  WARN 16640 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T11:03:57.144+02:00  INFO 16640 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T11:03:58.387+02:00  INFO 16640 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T11:03:58.408+02:00  INFO 16640 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 15.813 seconds (process running for 16.79)
2025-05-23T11:11:10.532+02:00  INFO 16640 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T11:11:10.533+02:00  INFO 16640 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T11:11:10.536+02:00  INFO 16640 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T11:11:11.007+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:11:11.063+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:11:31.878+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:11:31.880+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:11:31.986+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:11:53.246+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:11:53.249+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:11:53.289+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:11:53.300+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:11:53.309+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:11:53.362+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:11:53.380+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:11:53.412+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:11:53.465+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:11:53.471+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:11:53.474+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-4] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:267) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:12:07.743+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:12:07.745+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:12:07.753+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:12:07.757+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:12:07.761+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:12:07.768+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:12:07.773+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:12:07.777+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:12:07.837+02:00  WARN 16640 --- [app] [http-nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:12:07.837+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA002' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:19:41.927+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:19:41.930+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:19:41.937+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:19:41.941+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:19:41.943+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:19:41.949+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:19:41.953+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:19:41.955+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:19:41.960+02:00  WARN 16640 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:19:41.962+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:19:44.830+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:19:44.833+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:19:44.839+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:19:44.843+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:19:44.846+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:19:44.851+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:19:44.855+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:19:44.858+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:19:44.864+02:00  WARN 16640 --- [app] [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:19:44.865+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-9] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:19:56.447+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:19:56.450+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:20:11.668+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:20:11.671+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:20:11.680+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:20:11.685+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:20:11.688+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:20:11.695+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:20:11.700+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:20:11.703+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:20:11.707+02:00  WARN 16640 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:20:11.708+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:21:13.373+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:21:13.376+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:21:13.383+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:21:13.387+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:21:13.390+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:21:13.395+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:21:13.398+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:21:13.401+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:21:13.409+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:21:13.414+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:21:13.416+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-3] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:267) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:21:26.251+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:21:26.254+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:21:26.260+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:21:26.264+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:21:26.266+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:21:26.270+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:21:26.273+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:21:26.277+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:21:26.283+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:21:26.286+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:21:26.288+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-5] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:267) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:21:49.427+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:21:49.431+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:21:49.539+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:22:25.785+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:22:25.789+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:22:25.795+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:22:25.799+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:22:25.801+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:22:25.807+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:22:25.810+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:22:25.813+02:00 DEBUG 16640 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:22:25.816+02:00  WARN 16640 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:22:25.817+02:00 ERROR 16640 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:23:21.678+02:00  INFO 16640 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T11:23:21.693+02:00  INFO 16640 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T11:23:21.706+02:00  INFO 16640 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:23:21.715+02:00  INFO 16640 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T11:23:21.726+02:00  INFO 16640 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T11:23:35.858+02:00  INFO 16764 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 16764 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T11:23:35.863+02:00  INFO 16764 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T11:23:38.573+02:00  INFO 16764 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T11:23:38.887+02:00  INFO 16764 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 268 ms. Found 6 JPA repository interfaces.
2025-05-23T11:23:41.316+02:00  INFO 16764 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T11:23:41.358+02:00  INFO 16764 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T11:23:41.359+02:00  INFO 16764 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T11:23:41.535+02:00  INFO 16764 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T11:23:41.536+02:00  INFO 16764 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5546 ms
2025-05-23T11:23:42.035+02:00  INFO 16764 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T11:23:42.247+02:00  INFO 16764 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T11:23:42.459+02:00  INFO 16764 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T11:23:43.329+02:00  INFO 16764 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T11:23:43.428+02:00  INFO 16764 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T11:23:43.784+02:00  INFO 16764 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ed65e4b
2025-05-23T11:23:43.787+02:00  INFO 16764 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T11:23:43.845+02:00  WARN 16764 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T11:23:43.848+02:00  WARN 16764 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T11:23:43.908+02:00  INFO 16764 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T11:23:46.552+02:00  INFO 16764 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T11:23:47.168+02:00 DEBUG 16764 --- [app] [main] org.hibernate.SQL                        : alter table ticket drop index UKetx072u1eby9pfkkngphxoru
2025-05-23T11:23:47.257+02:00 DEBUG 16764 --- [app] [main] org.hibernate.SQL                        : alter table ticket add constraint UKetx072u1eby9pfkkngphxoru unique (agency_id)
2025-05-23T11:23:47.339+02:00  INFO 16764 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:23:49.290+02:00  INFO 16764 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T11:23:54.130+02:00  WARN 16764 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T11:23:54.202+02:00  INFO 16764 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T11:23:55.973+02:00  INFO 16764 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T11:23:56.005+02:00  INFO 16764 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 21.661 seconds (process running for 22.674)
2025-05-23T11:24:13.552+02:00  INFO 16764 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T11:24:13.552+02:00  INFO 16764 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T11:24:13.558+02:00  INFO 16764 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2025-05-23T11:24:14.128+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:24:14.210+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:24:14.471+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:24:14.489+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:24:14.495+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:24:14.547+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:24:14.565+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:24:14.597+02:00 DEBUG 16764 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:24:14.605+02:00  WARN 16764 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:24:14.605+02:00 ERROR 16764 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:32:34.963+02:00  INFO 16764 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T11:32:34.981+02:00  INFO 16764 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T11:32:34.996+02:00  INFO 16764 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:32:35.000+02:00  INFO 16764 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T11:32:35.011+02:00  INFO 16764 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T11:32:45.003+02:00  INFO 10528 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 10528 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T11:32:45.007+02:00  INFO 10528 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T11:32:47.321+02:00  INFO 10528 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T11:32:47.564+02:00  INFO 10528 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 196 ms. Found 6 JPA repository interfaces.
2025-05-23T11:32:49.334+02:00  INFO 10528 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T11:32:49.374+02:00  INFO 10528 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T11:32:49.375+02:00  INFO 10528 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T11:32:49.542+02:00  INFO 10528 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T11:32:49.544+02:00  INFO 10528 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4379 ms
2025-05-23T11:32:50.025+02:00  INFO 10528 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T11:32:50.180+02:00  INFO 10528 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T11:32:50.280+02:00  INFO 10528 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T11:32:50.998+02:00  INFO 10528 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T11:32:51.069+02:00  INFO 10528 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T11:32:51.369+02:00  INFO 10528 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@297bd171
2025-05-23T11:32:51.375+02:00  INFO 10528 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T11:32:51.421+02:00  WARN 10528 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T11:32:51.423+02:00  WARN 10528 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T11:32:51.453+02:00  INFO 10528 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T11:32:53.398+02:00  INFO 10528 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T11:32:53.651+02:00  INFO 10528 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:32:54.389+02:00  INFO 10528 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T11:32:57.903+02:00  WARN 10528 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T11:32:57.959+02:00  INFO 10528 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T11:32:59.231+02:00  INFO 10528 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T11:32:59.253+02:00  INFO 10528 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 15.485 seconds (process running for 16.458)
2025-05-23T11:33:08.288+02:00  INFO 10528 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T11:33:08.289+02:00  INFO 10528 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T11:33:08.292+02:00  INFO 10528 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T11:33:08.656+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:33:08.696+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:08.909+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:33:08.918+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:33:08.924+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:08.965+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:33:08.991+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:33:09.042+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 where t1_0.agency_id=? order by t1_0.sequence_number desc,t1_0.sequence_number desc limit ? for update
2025-05-23T11:33:09.095+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:33:09.194+02:00  WARN 10528 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:33:09.195+02:00 ERROR 10528 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:33:11.815+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:33:11.818+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:11.826+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:33:11.832+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:33:11.835+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:11.843+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:33:11.851+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:33:11.857+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 where t1_0.agency_id=? order by t1_0.sequence_number desc,t1_0.sequence_number desc limit ? for update
2025-05-23T11:33:11.861+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:33:11.867+02:00  WARN 10528 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T11:33:11.867+02:00 ERROR 10528 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T11:33:29.630+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:33:29.633+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:29.640+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:33:29.646+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:33:29.649+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:29.655+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:33:29.658+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:33:29.662+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:33:29.693+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:29.701+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:29.706+02:00 ERROR 10528 --- [app] [http-nio-8080-exec-6] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:286) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:33:34.069+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:33:34.073+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:34.079+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:33:34.088+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:33:34.090+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:34.099+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:33:34.103+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:33:34.105+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:33:34.111+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:34.116+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:34.119+02:00 ERROR 10528 --- [app] [http-nio-8080-exec-8] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:286) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:33:35.565+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:33:35.568+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:35.574+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:33:35.578+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:33:35.581+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:35.587+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:33:35.593+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:33:35.596+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:33:35.603+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:35.607+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:35.610+02:00 ERROR 10528 --- [app] [http-nio-8080-exec-7] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:286) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:33:36.725+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:33:36.727+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:36.735+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:33:36.742+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:33:36.745+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:36.752+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:33:36.756+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:33:36.760+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:33:36.767+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:36.771+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:36.774+02:00 ERROR 10528 --- [app] [http-nio-8080-exec-9] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:286) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:33:37.911+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:33:37.913+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:37.922+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:33:37.928+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T11:33:37.930+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:33:37.939+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T11:33:37.944+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T11:33:37.947+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T11:33:37.959+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:37.968+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:33:37.972+02:00 ERROR 10528 --- [app] [http-nio-8080-exec-10] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:286) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:74) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T11:37:56.099+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:37:56.106+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:37:56.222+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:39:43.016+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:39:43.020+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:44:53.371+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:44:53.374+02:00 DEBUG 10528 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:52:13.161+02:00  INFO 10528 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T11:52:13.176+02:00  INFO 10528 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T11:52:13.192+02:00  INFO 10528 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:52:13.206+02:00  INFO 10528 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T11:52:13.220+02:00  INFO 10528 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T11:52:24.767+02:00  INFO 11732 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 11732 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T11:52:24.772+02:00  INFO 11732 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T11:52:27.244+02:00  INFO 11732 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T11:52:27.473+02:00  INFO 11732 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 203 ms. Found 6 JPA repository interfaces.
2025-05-23T11:52:29.388+02:00  INFO 11732 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T11:52:29.431+02:00  INFO 11732 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T11:52:29.432+02:00  INFO 11732 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T11:52:29.609+02:00  INFO 11732 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T11:52:29.611+02:00  INFO 11732 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4684 ms
2025-05-23T11:52:30.088+02:00  INFO 11732 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T11:52:30.276+02:00  INFO 11732 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T11:52:30.401+02:00  INFO 11732 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T11:52:31.310+02:00  INFO 11732 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T11:52:31.376+02:00  INFO 11732 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T11:52:31.688+02:00  INFO 11732 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@297bd171
2025-05-23T11:52:31.693+02:00  INFO 11732 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T11:52:31.758+02:00  WARN 11732 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T11:52:31.760+02:00  WARN 11732 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T11:52:31.807+02:00  INFO 11732 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T11:52:34.493+02:00  INFO 11732 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T11:52:34.740+02:00  INFO 11732 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T11:52:35.458+02:00  INFO 11732 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T11:52:39.159+02:00  WARN 11732 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T11:52:39.226+02:00  INFO 11732 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T11:52:40.677+02:00  INFO 11732 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T11:52:40.699+02:00  INFO 11732 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 17.242 seconds (process running for 18.265)
2025-05-23T11:53:09.244+02:00  INFO 11732 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T11:53:09.245+02:00  INFO 11732 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T11:53:09.254+02:00  INFO 11732 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 7 ms
2025-05-23T11:53:09.821+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:53:09.886+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:53:10.092+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 where a1_0.user_id=?
2025-05-23T11:53:10.111+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T11:53:10.137+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T11:53:10.140+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:53:10.160+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE' and date(t1_0.issued_at)=current_date
2025-05-23T11:54:15.992+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:54:15.996+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:54:16.003+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 where a1_0.user_id=?
2025-05-23T11:54:16.005+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T11:54:16.007+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T11:54:16.009+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:54:16.016+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_COURS' and date(t1_0.issued_at)=current_date
2025-05-23T11:54:28.619+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:54:28.624+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:54:28.631+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 where a1_0.user_id=?
2025-05-23T11:54:28.634+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T11:54:28.639+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T11:54:28.642+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:54:28.647+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='ANNULE' and date(t1_0.issued_at)=current_date
2025-05-23T11:54:36.037+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:54:36.042+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:54:36.049+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 where a1_0.user_id=?
2025-05-23T11:54:36.051+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T11:54:36.053+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T11:54:36.056+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:54:36.064+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='TERMINE' and date(t1_0.issued_at)=current_date
2025-05-23T11:55:25.972+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:55:25.978+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:55:25.985+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 where a1_0.user_id=?
2025-05-23T11:55:25.988+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T11:55:25.992+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T11:55:25.995+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:55:26.003+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 where t1_0.agency_id=? order by t1_0.issued_at desc
2025-05-23T11:55:26.006+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 where s1_0.id=?
2025-05-23T11:55:26.009+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:55:26.020+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 where s1_0.id=?
2025-05-23T11:55:26.023+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T11:56:16.031+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:56:16.035+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:56:16.044+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T11:59:06.543+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:59:06.545+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:59:15.663+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:59:15.665+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:59:15.677+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id where t1_0.id=? and a1_0.id=?
2025-05-23T11:59:40.129+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:59:40.132+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:59:40.139+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id where t1_0.id=? and a1_0.id=?
2025-05-23T11:59:53.959+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T11:59:53.963+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T11:59:53.971+02:00 DEBUG 11732 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id where t1_0.id=? and a1_0.id=?
2025-05-23T12:12:16.622+02:00  INFO 11732 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T12:12:16.634+02:00  INFO 11732 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T12:12:16.643+02:00  INFO 11732 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:12:16.647+02:00  INFO 11732 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T12:12:16.657+02:00  INFO 11732 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T12:12:29.013+02:00  INFO 9136 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 9136 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T12:12:29.019+02:00  INFO 9136 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T12:12:31.430+02:00  INFO 9136 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T12:12:31.672+02:00  INFO 9136 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 214 ms. Found 6 JPA repository interfaces.
2025-05-23T12:12:33.569+02:00  INFO 9136 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T12:12:33.607+02:00  INFO 9136 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T12:12:33.607+02:00  INFO 9136 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T12:12:33.795+02:00  INFO 9136 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T12:12:33.796+02:00  INFO 9136 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4632 ms
2025-05-23T12:12:34.278+02:00  INFO 9136 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T12:12:34.467+02:00  INFO 9136 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T12:12:34.587+02:00  INFO 9136 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T12:12:35.639+02:00  INFO 9136 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T12:12:35.765+02:00  INFO 9136 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T12:12:36.169+02:00  INFO 9136 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@118cbded
2025-05-23T12:12:36.174+02:00  INFO 9136 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T12:12:36.256+02:00  WARN 9136 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T12:12:36.259+02:00  WARN 9136 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T12:12:36.309+02:00  INFO 9136 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T12:12:39.560+02:00  INFO 9136 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T12:12:39.884+02:00  INFO 9136 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:12:40.630+02:00  INFO 9136 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T12:12:45.708+02:00  WARN 9136 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T12:12:45.779+02:00  INFO 9136 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T12:12:47.698+02:00  INFO 9136 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T12:12:47.720+02:00  INFO 9136 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 19.948 seconds (process running for 20.975)
2025-05-23T12:12:50.454+02:00  INFO 9136 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T12:12:50.455+02:00  INFO 9136 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T12:12:50.460+02:00  INFO 9136 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-05-23T12:12:50.996+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:12:51.044+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:12:51.184+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T12:12:51.193+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T12:12:51.210+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T12:12:51.212+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:12:51.252+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T12:12:51.326+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : update ticket set agency_id=?,service_id=?,client_id=?,completed_at=?,number=?,sequence_number=?,served=?,started_at=?,status=? where id=?
2025-05-23T12:13:32.946+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:13:32.949+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:13:32.962+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:13:32.974+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:13:32.980+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:13:32.996+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:13:33.022+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:13:33.047+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:13:33.149+02:00  WARN 9136 --- [app] [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T12:13:33.149+02:00 ERROR 9136 --- [app] [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T12:13:33.174+02:00 ERROR 9136 --- [app] [http-nio-8080-exec-3] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in com.nouba.app.entities.Ticket entry (don't flush the Session after an exception occurs)
2025-05-23T12:14:06.296+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:14:06.299+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:14:15.239+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:14:15.243+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:14:15.251+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:14:15.258+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:14:15.260+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:14:15.267+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:14:15.272+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:14:15.279+02:00 DEBUG 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:14:15.287+02:00  WARN 9136 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T12:14:15.288+02:00 ERROR 9136 --- [app] [http-nio-8080-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T12:14:15.293+02:00 ERROR 9136 --- [app] [http-nio-8080-exec-6] org.hibernate.AssertionFailure           : HHH000099: an assertion failure occurred (this may indicate a bug in Hibernate, but is more likely due to unsafe use of the session): org.hibernate.AssertionFailure: null id in com.nouba.app.entities.Ticket entry (don't flush the Session after an exception occurs)
2025-05-23T12:22:42.134+02:00  INFO 9136 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T12:22:42.146+02:00  INFO 9136 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T12:22:42.155+02:00  INFO 9136 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:22:42.159+02:00  INFO 9136 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T12:22:42.167+02:00  INFO 9136 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T12:22:54.801+02:00  INFO 10936 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 10936 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T12:22:54.806+02:00  INFO 10936 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T12:22:57.093+02:00  INFO 10936 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T12:22:57.324+02:00  INFO 10936 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 206 ms. Found 6 JPA repository interfaces.
2025-05-23T12:22:59.020+02:00  INFO 10936 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T12:22:59.056+02:00  INFO 10936 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T12:22:59.057+02:00  INFO 10936 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T12:22:59.240+02:00  INFO 10936 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T12:22:59.242+02:00  INFO 10936 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4285 ms
2025-05-23T12:22:59.670+02:00  INFO 10936 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T12:22:59.822+02:00  INFO 10936 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T12:22:59.907+02:00  INFO 10936 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T12:23:00.595+02:00  INFO 10936 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T12:23:00.668+02:00  INFO 10936 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T12:23:00.937+02:00  INFO 10936 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@118cbded
2025-05-23T12:23:00.941+02:00  INFO 10936 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T12:23:00.992+02:00  WARN 10936 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T12:23:00.997+02:00  WARN 10936 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T12:23:01.041+02:00  INFO 10936 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T12:23:03.190+02:00  INFO 10936 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T12:23:03.420+02:00  INFO 10936 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:23:04.193+02:00  INFO 10936 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T12:23:07.760+02:00  WARN 10936 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T12:23:07.828+02:00  INFO 10936 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T12:23:09.151+02:00  INFO 10936 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T12:23:09.169+02:00  INFO 10936 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 15.59 seconds (process running for 16.601)
2025-05-23T12:23:18.948+02:00  INFO 10936 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T12:23:18.949+02:00  INFO 10936 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T12:23:18.952+02:00  INFO 10936 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T12:23:19.442+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:23:19.491+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:23:19.652+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T12:23:19.665+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T12:23:19.713+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T12:23:19.717+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:23:19.763+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T12:23:34.724+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:23:34.727+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:23:34.734+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T12:23:34.737+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T12:23:34.739+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T12:23:34.741+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:23:34.744+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T12:23:34.803+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : update ticket set agency_id=?,service_id=?,client_id=?,completed_at=?,number=?,sequence_number=?,served=?,started_at=?,status=? where id=?
2025-05-23T12:23:41.809+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:23:41.812+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:23:41.827+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:23:41.837+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:23:41.841+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:23:41.861+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:23:41.883+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:23:41.914+02:00 DEBUG 10936 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:23:41.999+02:00  WARN 10936 --- [app] [http-nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1048, SQLState: 23000
2025-05-23T12:23:41.999+02:00 ERROR 10936 --- [app] [http-nio-8080-exec-5] o.h.engine.jdbc.spi.SqlExceptionHelper   : Column 'public_access_code' cannot be null
2025-05-23T12:26:25.544+02:00  INFO 10936 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T12:26:25.558+02:00  INFO 10936 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T12:26:25.567+02:00  INFO 10936 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:26:25.570+02:00  INFO 10936 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T12:26:25.578+02:00  INFO 10936 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T12:26:41.120+02:00  INFO 17972 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 17972 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T12:26:41.125+02:00  INFO 17972 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T12:26:44.116+02:00  INFO 17972 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T12:26:44.342+02:00  INFO 17972 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 198 ms. Found 6 JPA repository interfaces.
2025-05-23T12:26:46.230+02:00  INFO 17972 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T12:26:46.271+02:00  INFO 17972 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T12:26:46.272+02:00  INFO 17972 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T12:26:46.467+02:00  INFO 17972 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T12:26:46.474+02:00  INFO 17972 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5171 ms
2025-05-23T12:26:46.917+02:00  INFO 17972 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T12:26:47.076+02:00  INFO 17972 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T12:26:47.187+02:00  INFO 17972 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T12:26:48.037+02:00  INFO 17972 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T12:26:48.126+02:00  INFO 17972 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T12:26:48.462+02:00  INFO 17972 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7848321e
2025-05-23T12:26:48.466+02:00  INFO 17972 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T12:26:48.533+02:00  WARN 17972 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T12:26:48.536+02:00  WARN 17972 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T12:26:48.585+02:00  INFO 17972 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T12:26:50.646+02:00  INFO 17972 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T12:26:50.896+02:00  INFO 17972 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:26:51.585+02:00  INFO 17972 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T12:26:55.068+02:00  WARN 17972 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T12:26:55.150+02:00  INFO 17972 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T12:26:56.421+02:00  INFO 17972 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T12:26:56.439+02:00  INFO 17972 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 16.818 seconds (process running for 18.316)
2025-05-23T12:27:34.923+02:00  INFO 17972 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T12:27:34.923+02:00  INFO 17972 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T12:27:34.927+02:00  INFO 17972 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T12:27:35.402+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:27:35.453+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:27:35.650+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T12:27:35.658+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T12:27:35.673+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T12:27:35.674+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:27:35.707+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.public_access_code,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T12:27:46.528+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:27:46.532+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:27:46.562+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:27:46.585+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:27:46.588+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:27:46.632+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:27:46.649+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:27:46.663+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(t1_0.id)>0 from ticket t1_0 where t1_0.agency_id=? and t1_0.number=?
2025-05-23T12:27:46.700+02:00 DEBUG 17972 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:27:46.794+02:00  WARN 17972 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1048, SQLState: 23000
2025-05-23T12:27:46.795+02:00 ERROR 17972 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Column 'public_access_code' cannot be null
2025-05-23T12:27:58.587+02:00  INFO 17972 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T12:27:58.612+02:00  INFO 17972 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T12:27:58.627+02:00  INFO 17972 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:27:58.653+02:00  INFO 17972 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T12:27:58.662+02:00  INFO 17972 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T12:28:22.538+02:00  INFO 13260 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 13260 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T12:28:22.543+02:00  INFO 13260 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T12:28:26.995+02:00  INFO 13260 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T12:28:27.437+02:00  INFO 13260 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 403 ms. Found 6 JPA repository interfaces.
2025-05-23T12:28:30.955+02:00  INFO 13260 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T12:28:30.995+02:00  INFO 13260 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T12:28:31.085+02:00  INFO 13260 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T12:28:31.829+02:00  INFO 13260 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T12:28:31.831+02:00  INFO 13260 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 9157 ms
2025-05-23T12:28:32.682+02:00  INFO 13260 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T12:28:32.950+02:00  INFO 13260 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T12:28:33.414+02:00  INFO 13260 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T12:28:36.658+02:00  INFO 13260 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T12:28:36.949+02:00  INFO 13260 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T12:28:38.023+02:00  INFO 13260 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4cc26df
2025-05-23T12:28:38.028+02:00  INFO 13260 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T12:28:38.139+02:00  WARN 13260 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T12:28:38.142+02:00  WARN 13260 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T12:28:38.205+02:00  INFO 13260 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T12:28:43.182+02:00  INFO 13260 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T12:28:43.662+02:00  INFO 13260 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:28:44.754+02:00  INFO 13260 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T12:28:53.530+02:00  WARN 13260 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T12:28:53.828+02:00  INFO 13260 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T12:28:57.956+02:00  INFO 13260 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T12:28:57.987+02:00  INFO 13260 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 37.283 seconds (process running for 38.395)
2025-05-23T12:45:51.836+02:00  INFO 13260 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T12:45:51.866+02:00  INFO 13260 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T12:45:51.890+02:00  INFO 13260 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:45:51.929+02:00  INFO 13260 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T12:45:51.949+02:00  INFO 13260 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T12:46:04.163+02:00  INFO 2688 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 2688 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T12:46:04.168+02:00  INFO 2688 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T12:46:06.671+02:00  INFO 2688 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T12:46:06.932+02:00  INFO 2688 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 237 ms. Found 6 JPA repository interfaces.
2025-05-23T12:46:08.882+02:00  INFO 2688 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T12:46:08.926+02:00  INFO 2688 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T12:46:08.927+02:00  INFO 2688 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T12:46:09.095+02:00  INFO 2688 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T12:46:09.097+02:00  INFO 2688 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4774 ms
2025-05-23T12:46:09.529+02:00  INFO 2688 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T12:46:09.758+02:00  INFO 2688 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T12:46:09.870+02:00  INFO 2688 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T12:46:10.608+02:00  INFO 2688 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T12:46:10.704+02:00  INFO 2688 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T12:46:11.076+02:00  INFO 2688 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4cc26df
2025-05-23T12:46:11.080+02:00  INFO 2688 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T12:46:11.141+02:00  WARN 2688 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T12:46:11.143+02:00  WARN 2688 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T12:46:11.187+02:00  INFO 2688 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T12:46:13.657+02:00  INFO 2688 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T12:46:13.930+02:00  INFO 2688 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:46:14.700+02:00  INFO 2688 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T12:46:18.656+02:00  WARN 2688 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T12:46:18.732+02:00  INFO 2688 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T12:46:20.225+02:00  INFO 2688 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T12:46:20.244+02:00  INFO 2688 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 17.438 seconds (process running for 18.486)
2025-05-23T12:46:30.254+02:00  INFO 2688 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T12:46:30.255+02:00  INFO 2688 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T12:46:30.259+02:00  INFO 2688 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T12:46:30.862+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:46:30.948+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:46:31.246+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:46:31.258+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:46:31.269+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:46:31.330+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:46:31.350+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:46:31.392+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:46:31.450+02:00  WARN 2688 --- [app] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1048, SQLState: 23000
2025-05-23T12:46:31.451+02:00 ERROR 2688 --- [app] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Column 'public_access_code' cannot be null
2025-05-23T12:49:53.759+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:49:53.763+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:49:53.774+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:49:53.783+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:49:53.786+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:49:53.799+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:49:53.811+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:49:53.815+02:00 DEBUG 2688 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,public_access_code,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:49:53.825+02:00  WARN 2688 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1048, SQLState: 23000
2025-05-23T12:49:53.826+02:00 ERROR 2688 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Column 'public_access_code' cannot be null
2025-05-23T12:52:21.332+02:00  INFO 2688 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T12:52:21.347+02:00  INFO 2688 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T12:52:21.357+02:00  INFO 2688 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:52:21.360+02:00  INFO 2688 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T12:52:21.374+02:00  INFO 2688 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T12:52:37.421+02:00  INFO 6616 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 6616 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T12:52:37.427+02:00  INFO 6616 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T12:52:39.867+02:00  INFO 6616 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T12:52:40.138+02:00  INFO 6616 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 245 ms. Found 6 JPA repository interfaces.
2025-05-23T12:52:42.234+02:00  INFO 6616 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T12:52:42.273+02:00  INFO 6616 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T12:52:42.274+02:00  INFO 6616 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T12:52:42.472+02:00  INFO 6616 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T12:52:42.474+02:00  INFO 6616 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4934 ms
2025-05-23T12:52:42.976+02:00  INFO 6616 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T12:52:43.185+02:00  INFO 6616 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T12:52:43.317+02:00  INFO 6616 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T12:52:44.123+02:00  INFO 6616 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T12:52:44.210+02:00  INFO 6616 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T12:52:44.524+02:00  INFO 6616 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4cc26df
2025-05-23T12:52:44.530+02:00  INFO 6616 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T12:52:44.597+02:00  WARN 6616 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T12:52:44.600+02:00  WARN 6616 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T12:52:44.648+02:00  INFO 6616 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T12:52:46.931+02:00  INFO 6616 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T12:52:47.187+02:00  INFO 6616 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:52:47.943+02:00  INFO 6616 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T12:52:51.371+02:00  WARN 6616 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T12:52:51.438+02:00  INFO 6616 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T12:52:52.867+02:00  INFO 6616 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T12:52:52.886+02:00  INFO 6616 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 17.11 seconds (process running for 18.12)
2025-05-23T12:53:02.011+02:00  INFO 6616 --- [app] [http-nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T12:53:02.012+02:00  INFO 6616 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T12:53:02.016+02:00  INFO 6616 --- [app] [http-nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T12:53:02.534+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:53:02.584+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:53:02.833+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:53:02.841+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:53:02.846+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:53:02.881+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:53:02.895+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:53:02.922+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:53:02.978+02:00  WARN 6616 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1364, SQLState: HY000
2025-05-23T12:53:02.978+02:00 ERROR 6616 --- [app] [http-nio-8080-exec-2] o.h.engine.jdbc.spi.SqlExceptionHelper   : Field 'public_access_code' doesn't have a default value
2025-05-23T12:55:33.075+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:55:33.083+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:55:33.094+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:55:33.101+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:55:33.104+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:55:33.112+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:55:33.121+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:55:33.125+02:00 DEBUG 6616 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:55:33.132+02:00  WARN 6616 --- [app] [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T12:55:33.132+02:00 ERROR 6616 --- [app] [http-nio-8080-exec-3] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T12:58:20.187+02:00  INFO 6616 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T12:58:20.210+02:00  INFO 6616 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T12:58:20.226+02:00  INFO 6616 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:58:20.252+02:00  INFO 6616 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T12:58:20.267+02:00  INFO 6616 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T12:58:34.365+02:00  INFO 1612 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 1612 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T12:58:34.372+02:00  INFO 1612 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T12:58:37.989+02:00  INFO 1612 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T12:58:38.323+02:00  INFO 1612 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 298 ms. Found 6 JPA repository interfaces.
2025-05-23T12:58:40.835+02:00  INFO 1612 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T12:58:40.894+02:00  INFO 1612 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T12:58:40.895+02:00  INFO 1612 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T12:58:41.206+02:00  INFO 1612 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T12:58:41.276+02:00  INFO 1612 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6745 ms
2025-05-23T12:58:46.367+02:00  INFO 1612 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T12:58:46.579+02:00  INFO 1612 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T12:58:46.694+02:00  INFO 1612 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T12:58:47.573+02:00  INFO 1612 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T12:58:47.668+02:00  INFO 1612 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T12:58:48.067+02:00  INFO 1612 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4cc26df
2025-05-23T12:58:48.072+02:00  INFO 1612 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T12:58:48.139+02:00  WARN 1612 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T12:58:48.142+02:00  WARN 1612 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T12:58:48.206+02:00  INFO 1612 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T12:58:50.913+02:00  INFO 1612 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T12:58:51.161+02:00  INFO 1612 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T12:58:51.761+02:00  INFO 1612 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T12:58:55.634+02:00  WARN 1612 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T12:58:55.721+02:00  INFO 1612 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T12:58:57.176+02:00  INFO 1612 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T12:58:57.200+02:00  INFO 1612 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 24.613 seconds (process running for 25.805)
2025-05-23T12:59:03.884+02:00  INFO 1612 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T12:59:03.885+02:00  INFO 1612 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T12:59:03.891+02:00  INFO 1612 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2025-05-23T12:59:04.485+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:59:04.540+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:59:04.760+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:59:04.771+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:59:04.776+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:59:04.821+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:59:04.834+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:59:04.868+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:59:04.944+02:00  WARN 1612 --- [app] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T12:59:04.945+02:00 ERROR 1612 --- [app] [http-nio-8080-exec-1] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T12:59:13.623+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T12:59:13.663+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:59:13.670+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T12:59:13.722+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T12:59:13.740+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T12:59:13.769+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T12:59:13.797+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T12:59:13.802+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T12:59:13.818+02:00  WARN 1612 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T12:59:13.819+02:00 ERROR 1612 --- [app] [http-nio-8080-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T13:00:05.800+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:00:05.804+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:00:05.810+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T13:00:05.815+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T13:00:05.818+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:00:05.825+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T13:00:05.830+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T13:00:05.836+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T13:00:05.902+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T13:00:05.911+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T13:00:05.914+02:00 ERROR 1612 --- [app] [http-nio-8080-exec-6] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:310) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:81) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T13:00:43.900+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:00:43.904+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:00:44.012+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-7] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:01:09.703+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:01:09.709+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:01:09.722+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T13:01:09.728+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T13:01:09.731+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:01:09.740+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T13:01:09.744+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T13:01:09.747+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T13:01:09.751+02:00  WARN 1612 --- [app] [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 1062, SQLState: 23000
2025-05-23T13:01:09.751+02:00 ERROR 1612 --- [app] [http-nio-8080-exec-8] o.h.engine.jdbc.spi.SqlExceptionHelper   : Duplicate entry 'NOUBA001' for key 'UK2q957ve7gyajshqxiaga68a0w'
2025-05-23T13:07:41.670+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:07:41.675+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:07:41.682+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T13:07:41.686+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T13:07:41.691+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:07:41.696+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T13:07:41.701+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T13:07:41.704+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T13:07:41.711+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T13:07:41.715+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T13:07:41.717+02:00 ERROR 1612 --- [app] [http-nio-8080-exec-10] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:310) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:81) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T13:12:42.887+02:00  WARN 1612 --- [app] [HikariPool-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m41s508ms860µs300ns).
2025-05-23T13:13:41.306+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:13:41.346+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:13:41.691+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T13:13:41.791+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T13:13:41.807+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T13:13:41.807+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:13:41.880+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T13:14:16.591+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:14:16.599+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:14:16.607+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T13:14:16.607+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T13:14:16.607+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T13:14:16.607+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:14:16.615+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T13:14:16.623+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:14:31.872+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:14:31.888+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:14:31.896+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T13:14:31.896+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T13:14:31.904+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T13:14:31.904+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:14:31.912+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T13:15:12.480+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T13:15:12.480+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:15:12.488+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T13:15:12.488+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T13:15:12.496+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T13:15:12.496+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T13:15:12.496+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T13:15:12.741+02:00 DEBUG 1612 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : update ticket set agency_id=?,service_id=?,client_id=?,completed_at=?,number=?,sequence_number=?,served=?,started_at=?,status=? where id=?
2025-05-23T13:15:27.959+02:00  INFO 1612 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T13:15:27.995+02:00  INFO 1612 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T13:15:28.074+02:00  INFO 1612 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T13:15:28.135+02:00  INFO 1612 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T13:15:28.160+02:00  INFO 1612 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T14:09:31.712+02:00  INFO 17928 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 17928 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T14:09:31.724+02:00  INFO 17928 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T14:09:41.430+02:00  INFO 17928 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T14:09:41.798+02:00  INFO 17928 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 331 ms. Found 6 JPA repository interfaces.
2025-05-23T14:09:47.977+02:00  INFO 17928 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T14:09:48.067+02:00  INFO 17928 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T14:09:48.068+02:00  INFO 17928 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T14:09:48.501+02:00  INFO 17928 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T14:09:48.502+02:00  INFO 17928 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 15263 ms
2025-05-23T14:09:52.565+02:00  INFO 17928 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T14:09:53.300+02:00  INFO 17928 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T14:09:53.558+02:00  INFO 17928 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T14:09:55.242+02:00  INFO 17928 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T14:09:55.366+02:00  INFO 17928 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T14:09:55.961+02:00  INFO 17928 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4cc26df
2025-05-23T14:09:55.967+02:00  INFO 17928 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T14:09:56.044+02:00  WARN 17928 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T14:09:56.050+02:00  WARN 17928 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T14:09:56.131+02:00  INFO 17928 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T14:09:59.943+02:00  INFO 17928 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T14:10:00.369+02:00 DEBUG 17928 --- [app] [main] org.hibernate.SQL                        : alter table ticket drop index UKahewwgrd84lnyxh99panb2lji
2025-05-23T14:10:00.495+02:00 DEBUG 17928 --- [app] [main] org.hibernate.SQL                        : alter table ticket add constraint UKahewwgrd84lnyxh99panb2lji unique (agency_id, number)
2025-05-23T14:10:00.684+02:00  INFO 17928 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T14:10:01.659+02:00  INFO 17928 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T14:10:08.242+02:00  WARN 17928 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T14:10:08.321+02:00  INFO 17928 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T14:10:10.457+02:00  INFO 17928 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T14:10:10.486+02:00  INFO 17928 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 45.678 seconds (process running for 49.923)
2025-05-23T14:13:17.662+02:00  INFO 17928 --- [app] [http-nio-8080-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T14:13:17.663+02:00  INFO 17928 --- [app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T14:13:17.674+02:00  INFO 17928 --- [app] [http-nio-8080-exec-3] o.s.web.servlet.DispatcherServlet        : Completed initialization in 10 ms
2025-05-23T14:13:18.494+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:13:18.638+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:13:18.890+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id where t1_0.id=? and a1_0.id=?
2025-05-23T14:13:59.951+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:13:59.986+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:14:00.031+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id where t1_0.id=? and a1_0.id=?
2025-05-23T14:14:23.578+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:14:23.585+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:14:23.593+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id where t1_0.id=? and a1_0.id=?
2025-05-23T14:14:35.911+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:14:35.913+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:14:35.923+02:00 DEBUG 17928 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id where t1_0.id=? and a1_0.id=?
2025-05-23T14:28:10.822+02:00  INFO 17928 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T14:28:10.854+02:00  INFO 17928 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T14:28:10.880+02:00  INFO 17928 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T14:28:10.921+02:00  INFO 17928 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T14:28:10.958+02:00  INFO 17928 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T14:28:27.036+02:00  INFO 6644 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 6644 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T14:28:27.042+02:00  INFO 6644 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T14:28:31.357+02:00  INFO 6644 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T14:28:31.665+02:00  INFO 6644 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 251 ms. Found 6 JPA repository interfaces.
2025-05-23T14:28:34.457+02:00  INFO 6644 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T14:28:34.527+02:00  INFO 6644 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T14:28:34.528+02:00  INFO 6644 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T14:28:34.883+02:00  INFO 6644 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T14:28:34.884+02:00  INFO 6644 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7648 ms
2025-05-23T14:28:35.484+02:00  INFO 6644 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T14:28:35.747+02:00  INFO 6644 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T14:28:36.013+02:00  INFO 6644 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T14:28:37.211+02:00  INFO 6644 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T14:28:37.348+02:00  INFO 6644 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T14:28:37.932+02:00  INFO 6644 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7848321e
2025-05-23T14:28:37.938+02:00  INFO 6644 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T14:28:38.011+02:00  WARN 6644 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T14:28:38.017+02:00  WARN 6644 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T14:28:38.081+02:00  INFO 6644 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T14:28:41.905+02:00  INFO 6644 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T14:28:42.232+02:00  INFO 6644 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T14:28:43.042+02:00  INFO 6644 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T14:28:48.123+02:00  WARN 6644 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T14:28:48.206+02:00  INFO 6644 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T14:28:50.587+02:00  INFO 6644 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T14:28:50.617+02:00  INFO 6644 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 25.743 seconds (process running for 27.53)
2025-05-23T14:28:57.211+02:00  INFO 6644 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T14:28:57.212+02:00  INFO 6644 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T14:28:57.217+02:00  INFO 6644 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2025-05-23T14:28:57.713+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:28:57.769+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:28:57.868+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T14:28:57.887+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T14:28:57.909+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T14:28:57.910+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:28:57.930+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 where t1_0.id=? and t1_0.agency_id=?
2025-05-23T14:28:57.938+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 where s1_0.id=?
2025-05-23T14:28:57.942+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T14:28:58.070+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : update ticket set agency_id=?,service_id=?,client_id=?,completed_at=?,number=?,sequence_number=?,served=?,started_at=?,status=? where id=?
2025-05-23T14:32:19.769+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:32:19.772+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:32:19.895+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:33:18.763+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:33:18.775+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:33:18.910+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:34:19.344+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:34:19.352+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:19.488+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T14:34:19.501+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T14:34:19.507+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:19.529+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T14:34:19.553+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T14:34:19.577+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T14:34:19.724+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T14:34:19.737+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T14:34:19.741+02:00 ERROR 6644 --- [app] [http-nio-8080-exec-8] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:310) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:81) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T14:34:27.749+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:34:27.755+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:27.763+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T14:34:27.771+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T14:34:27.774+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:27.782+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T14:34:35.207+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:34:35.217+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:35.227+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T14:34:35.234+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T14:34:35.239+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:35.249+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T14:34:40.472+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:34:40.485+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:40.495+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T14:34:40.513+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from agency a1_0 join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id where a1_0.id=?
2025-05-23T14:34:40.519+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:34:40.531+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 left join service_agency a1_0 on s1_0.id=a1_0.service_id where s1_0.id=? and a1_0.agency_id=?
2025-05-23T14:34:40.537+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select max(t1_0.sequence_number) from ticket t1_0 where t1_0.agency_id=?
2025-05-23T14:34:40.545+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : insert into ticket (agency_id,service_id,client_id,completed_at,issued_at,number,sequence_number,served,started_at,status) values (?,?,?,?,?,?,?,?,?,?)
2025-05-23T14:34:40.554+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and cast(substring(t1_0.number,6) as signed)<? and t1_0.status='EN_ATTENTE'
2025-05-23T14:34:40.562+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select count(t1_0.id) from ticket t1_0 where t1_0.agency_id=? and t1_0.status='EN_ATTENTE'
2025-05-23T14:34:40.566+02:00 ERROR 6644 --- [app] [http-nio-8080-exec-4] com.nouba.app.services.TicketService     : Error sending notification / Erreur lors de l'envoi de la notification / خطأ في إرسال الإشعار

java.io.FileNotFoundException: class path resource [templates.email/ticket-notification.html] cannot be resolved to URL because it does not exist
	at org.springframework.core.io.ClassPathResource.getURL(ClassPathResource.java:230) ~[spring-core-6.2.5.jar:6.2.5]
	at org.springframework.core.io.AbstractFileResolvingResource.getFile(AbstractFileResolvingResource.java:200) ~[spring-core-6.2.5.jar:6.2.5]
	at com.nouba.app.services.EmailService.loadEmailTemplate(EmailService.java:61) ~[classes/:na]
	at com.nouba.app.services.TicketService.sendTicketNotification(TicketService.java:310) ~[classes/:na]
	at com.nouba.app.services.TicketService.generateTicket(TicketService.java:81) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:380) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.services.TicketService$$SpringCGLIB$$0.generateTicket(<generated>) ~[classes/:na]
	at com.nouba.app.controller.TicketController.takeTicket(TicketController.java:61) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:359) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.proceed(AuthorizationManagerBeforeMethodInterceptor.java:268) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.attemptAuthorization(AuthorizationManagerBeforeMethodInterceptor.java:263) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor.invoke(AuthorizationManagerBeforeMethodInterceptor.java:196) ~[spring-security-core-6.4.4.jar:6.4.4]
	at org.springframework.security.config.annotation.method.configuration.DeferringMethodInterceptor.invoke(DeferringMethodInterceptor.java:44) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.2.5.jar:6.2.5]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:727) ~[spring-aop-6.2.5.jar:6.2.5]
	at com.nouba.app.controller.TicketController$$SpringCGLIB$$0.takeTicket(<generated>) ~[classes/:na]
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:580) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:258) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:191) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:986) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:891) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.39.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at com.nouba.app.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:59) ~[classes/:na]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:243) ~[spring-webmvc-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238) ~[spring-security-config-6.4.4.jar:6.4.4]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.2.5.jar:6.2.5]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.2.5.jar:6.2.5]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:397) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:905) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1743) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.39.jar:10.1.39]
	at java.base/java.lang.Thread.run(Thread.java:1583) ~[na:na]

2025-05-23T14:38:29.193+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:38:29.200+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:38:29.207+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T14:38:29.216+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-6] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:38:59.673+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:38:59.680+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:38:59.687+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T14:38:59.696+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:40:05.781+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:40:05.784+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:40:05.918+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:41:58.301+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:41:58.305+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:41:58.313+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T14:41:58.315+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:42:10.853+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:42:10.857+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:42:10.867+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T14:42:10.872+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:42:10.890+02:00 DEBUG 6644 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : update ticket set agency_id=?,service_id=?,client_id=?,completed_at=?,number=?,sequence_number=?,served=?,started_at=?,status=? where id=?
2025-05-23T14:43:12.017+02:00  INFO 6644 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T14:43:12.035+02:00  INFO 6644 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T14:43:12.049+02:00  INFO 6644 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T14:43:12.061+02:00  INFO 6644 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T14:43:12.084+02:00  INFO 6644 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T14:43:24.803+02:00  INFO 13180 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 13180 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T14:43:24.809+02:00  INFO 13180 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T14:43:29.919+02:00  INFO 13180 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T14:43:30.619+02:00  INFO 13180 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 608 ms. Found 6 JPA repository interfaces.
2025-05-23T14:43:34.725+02:00  INFO 13180 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T14:43:34.778+02:00  INFO 13180 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T14:43:34.778+02:00  INFO 13180 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T14:43:35.012+02:00  INFO 13180 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T14:43:35.013+02:00  INFO 13180 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 9961 ms
2025-05-23T14:43:36.441+02:00  INFO 13180 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T14:43:36.813+02:00  INFO 13180 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T14:43:36.956+02:00  INFO 13180 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T14:43:38.410+02:00  INFO 13180 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T14:43:38.533+02:00  INFO 13180 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T14:43:39.508+02:00  INFO 13180 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4cc26df
2025-05-23T14:43:39.513+02:00  INFO 13180 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T14:43:39.594+02:00  WARN 13180 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T14:43:39.597+02:00  WARN 13180 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T14:43:39.690+02:00  INFO 13180 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T14:43:43.765+02:00  INFO 13180 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T14:43:44.197+02:00  INFO 13180 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T14:43:45.332+02:00  INFO 13180 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T14:43:52.071+02:00  WARN 13180 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T14:43:52.187+02:00  INFO 13180 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T14:43:55.623+02:00  INFO 13180 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T14:43:55.680+02:00  INFO 13180 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 33.646 seconds (process running for 35.286)
2025-05-23T14:44:20.780+02:00  INFO 13180 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T14:44:20.781+02:00  INFO 13180 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T14:44:20.786+02:00  INFO 13180 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-05-23T14:44:21.267+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:44:21.319+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:44:21.461+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T14:44:21.471+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T14:44:21.501+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T14:44:21.505+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:44:21.553+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,a1_0.id,a1_0.address,a1_0.city_id,c1_0.id,c1_0.name,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role,as1_0.id,as1_0.description,as1_0.name,t1_0.client_id,c2_0.id,c2_0.address,c2_0.phone,c2_0.user_id,u2_0.id,u2_0.activation_token,u2_0.email,u2_0.enabled,u2_0.last_login,u2_0.name,u2_0.password,u2_0.phone,u2_0.role,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 join agency a1_0 on a1_0.id=t1_0.agency_id join city c1_0 on c1_0.id=a1_0.city_id join users u1_0 on u1_0.id=a1_0.user_id left join services as1_0 on as1_0.id=t1_0.service_id join clients c2_0 on c2_0.id=t1_0.client_id join users u2_0 on u2_0.id=c2_0.user_id where t1_0.id=?
2025-05-23T14:44:21.627+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : update ticket set agency_id=?,service_id=?,client_id=?,completed_at=?,number=?,sequence_number=?,served=?,started_at=?,status=? where id=?
2025-05-23T14:44:40.197+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:44:40.203+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:44:40.216+02:00 DEBUG 13180 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 where t1_0.id=? and t1_0.agency_id=?
2025-05-23T14:56:39.185+02:00  INFO 13180 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T14:56:39.200+02:00  INFO 13180 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T14:56:39.216+02:00  INFO 13180 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T14:56:39.223+02:00  INFO 13180 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T14:56:39.243+02:00  INFO 13180 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-05-23T14:56:52.554+02:00  INFO 16056 --- [app] [main] com.nouba.app.AppApplication             : Starting AppApplication using Java 21.0.5 with PID 16056 (C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app\target\classes started by ZAKARIA.DERKAOUI in C:\Users\ZAKARIA.DERKAOUI\Desktop\ODC-2025.02.03 Fullslack\spring boot\app)
2025-05-23T14:56:52.565+02:00  INFO 16056 --- [app] [main] com.nouba.app.AppApplication             : No active profile set, falling back to 1 default profile: "default"
2025-05-23T14:56:55.722+02:00  INFO 16056 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-05-23T14:56:56.014+02:00  INFO 16056 --- [app] [main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 263 ms. Found 6 JPA repository interfaces.
2025-05-23T14:56:58.284+02:00  INFO 16056 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2025-05-23T14:56:58.328+02:00  INFO 16056 --- [app] [main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-05-23T14:56:58.329+02:00  INFO 16056 --- [app] [main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.39]
2025-05-23T14:56:58.532+02:00  INFO 16056 --- [app] [main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-05-23T14:56:58.534+02:00  INFO 16056 --- [app] [main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5785 ms
2025-05-23T14:56:59.115+02:00  INFO 16056 --- [app] [main] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-05-23T14:56:59.292+02:00  INFO 16056 --- [app] [main] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.6.11.Final
2025-05-23T14:56:59.444+02:00  INFO 16056 --- [app] [main] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-05-23T14:57:00.556+02:00  INFO 16056 --- [app] [main] o.s.o.j.p.SpringPersistenceUnitInfo      : No LoadTimeWeaver setup: ignoring JPA class transformer
2025-05-23T14:57:00.665+02:00  INFO 16056 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-05-23T14:57:01.126+02:00  INFO 16056 --- [app] [main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1e471884
2025-05-23T14:57:01.129+02:00  INFO 16056 --- [app] [main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-05-23T14:57:01.194+02:00  WARN 16056 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000025: MySQL8Dialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-05-23T14:57:01.199+02:00  WARN 16056 --- [app] [main] org.hibernate.orm.deprecation            : HHH90000026: MySQL8Dialect has been deprecated; use org.hibernate.dialect.MySQLDialect instead
2025-05-23T14:57:01.267+02:00  INFO 16056 --- [app] [main] org.hibernate.orm.connections.pooling    : HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-05-23T14:57:04.295+02:00  INFO 16056 --- [app] [main] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-05-23T14:57:04.587+02:00  INFO 16056 --- [app] [main] j.LocalContainerEntityManagerFactoryBean : Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T14:57:05.536+02:00  INFO 16056 --- [app] [main] o.s.d.j.r.query.QueryEnhancerFactory     : Hibernate is in classpath; If applicable, HQL parser will be used.
2025-05-23T14:57:10.510+02:00  WARN 16056 --- [app] [main] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-05-23T14:57:10.590+02:00  INFO 16056 --- [app] [main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name userDetailsServiceImpl
2025-05-23T14:57:13.595+02:00  INFO 16056 --- [app] [main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2025-05-23T14:57:13.657+02:00  INFO 16056 --- [app] [main] com.nouba.app.AppApplication             : Started AppApplication in 22.683 seconds (process running for 23.919)
2025-05-23T14:57:48.564+02:00  INFO 16056 --- [app] [http-nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-05-23T14:57:48.566+02:00  INFO 16056 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-05-23T14:57:48.571+02:00  INFO 16056 --- [app] [http-nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 4 ms
2025-05-23T14:57:49.017+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T14:57:49.073+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:57:49.267+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select a1_0.id,a1_0.address,a1_0.city_id,a1_0.name,a1_0.phone,a1_0.photo_url,a1_0.user_id from agency a1_0 left join users u1_0 on u1_0.id=a1_0.user_id where u1_0.id=?
2025-05-23T14:57:49.286+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.name from city c1_0 where c1_0.id=?
2025-05-23T14:57:49.331+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.id=?
2025-05-23T14:57:49.333+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T14:57:49.390+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select t1_0.id,t1_0.agency_id,t1_0.service_id,t1_0.client_id,t1_0.completed_at,t1_0.issued_at,t1_0.number,t1_0.sequence_number,t1_0.served,t1_0.started_at,t1_0.status from ticket t1_0 where t1_0.id=? and t1_0.agency_id=?
2025-05-23T14:57:49.395+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select s1_0.id,s1_0.description,s1_0.name from services s1_0 where s1_0.id=?
2025-05-23T14:57:49.398+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.id=?
2025-05-23T14:57:49.456+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : update ticket set agency_id=?,service_id=?,client_id=?,completed_at=?,number=?,sequence_number=?,served=?,started_at=?,status=? where id=?
2025-05-23T15:00:17.276+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:00:17.284+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:00:24.340+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:00:24.345+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:00:41.594+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:00:41.597+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:00:41.718+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:01:33.943+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:01:33.948+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-10] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:03:07.851+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:03:07.864+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:03:08.013+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-1] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:03:25.626+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:03:25.630+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:05:11.374+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:05:11.378+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-5] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:05:42.276+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:05:42.283+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-8] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:05:49.255+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:05:49.261+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-9] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:05:55.232+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:05:55.243+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-2] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:06:01.232+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:06:01.240+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:06:01.401+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-3] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:06:17.520+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from users u1_0 where u1_0.email=?
2025-05-23T15:06:17.524+02:00 DEBUG 16056 --- [app] [http-nio-8080-exec-4] org.hibernate.SQL                        : select c1_0.id,c1_0.address,c1_0.phone,c1_0.user_id,u1_0.id,u1_0.activation_token,u1_0.email,u1_0.enabled,u1_0.last_login,u1_0.name,u1_0.password,u1_0.phone,u1_0.role from clients c1_0 join users u1_0 on u1_0.id=c1_0.user_id where c1_0.user_id=?
2025-05-23T15:20:02.629+02:00  INFO 16056 --- [app] [SpringApplicationShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2025-05-23T15:20:02.665+02:00  INFO 16056 --- [app] [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2025-05-23T15:20:02.697+02:00  INFO 16056 --- [app] [SpringApplicationShutdownHook] j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2025-05-23T15:20:02.737+02:00  INFO 16056 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-05-23T15:20:02.763+02:00  INFO 16056 --- [app] [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
